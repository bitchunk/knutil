pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--ecpalt
--v0.1
--@shiftalow / bitchunk

--[[
- ecpalt           -- set transparency from palette table.
- @param  table p  -- a "table" contains the color id to be made transparent.

- @description
	- transparency is reset at each function execution.
	- if the value of the "color id key" in the palette table is 0, the palette becomes transparent.
	- the palette that was made black by mkpal() can be used as transparent as it is.
	- the format is redundant due to the specification to match mkpalt().
]]--

function ecpalt(p)
	palt()
	for i,v in pairs(p) do
		palt(i,v==0)
	end
end
----

--flickering transparent table 'g'
local g=split('111100001111000',1)

while 1 do
	cls(2)
	?'---------------'
	?'--ecpalt test--'
	?'---------------'
	
	palt()

	spr(1,16,32,2,2)
	?'< not transparent',36,32
	
	ecpalt({[1]=0,[7]=0})
	spr(1,32,48,2,2)
	?'< 1,7 transparent',52,48
	
	ecpalt({[6]=0,[7]=0,[13]=0})
	spr(1,48,64,2,2)
	?'< 6,7,13\n   transparent',66,64

--	transparent "g" is a full color table.
	ecpalt(g)
	spr(1,64,80,2,2)
	?'^ flickering!',72,98
	
	add(g,deli(g,1))
	flip()
end


-->8
--[[
update history
**v0.1**
- first release
]]--

-->8
--other version code
--[[

--** string support ver **--

function ecpalt(p)
	palt()
	for i,v in pairs(split(p,1) or p) do
		if count(p) then
		stop(tonum(v,1)..' '..i)
			v,i=i,v==0
		end
		palt(tonum(v,1),i)
--		palt(i,v==0)
--			palt(count(p) and i or v,not count(p) or v==0)
	end
end

function ecpalt(p)
	palt()
	for i,v in pairs(split(p,1) or p) do
		palt(select(count(p) and 2 or 1,tonum(v,1),i,v==0))
	end
end


]]--
__gfx__
00000000111111100111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000016ddd61111d6ddd100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007001d111d6116d111d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770001d11ddd66ddd11d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770001d11dddddddd11d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007001d1d711dd711d1d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000011dd11ddd11ddd1100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111d11d6d11dd11100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001dddd1ddddd10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000011ddd11ddd110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000111dddd11111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000001d11111d117100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000111ddd11116100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000111dd1dd11d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000016d116dd1dd100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000011111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
66626662666266626662666266626662666266626662666266626662666222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222666226626662666262226662222266626662266266622222222222222222222222222222222222222222222222222222222222222222222222222222
22222222622262226262626262222622222226226222622226222222222222222222222222222222222222222222222222222222222222222222222222222222
66626662662262226662666262222622222226226622666226226662666222222222222222222222222222222222222222222222222222222222222222222222
22222222622262226222626262222622222226226222226226222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222666226626222626266622622222226226662662226222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
66626662666266626662666266626662666266626662666266626662666222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222221111111221111111222222622222662226626662222266626662666266222662666266626662666266226662222222222222222222222222
222222222222222216ddd61111d6ddd1222226222222626262622622222226226262626262626222626262626262622262622622222222222222222222222222
22222222222222221d111d6116d111d1222262222222626262622622222226226622666262626662666266626622662262622622222222222222222222222222
22222222222222221d11ddd66ddd11d1222226222222626262622622222226226262626262622262622262626262622262622622222222222222222222222222
22222222222222221d11dddddddd11d1222222622222626266222622222226226262626262626622622262626262666262622622222222222222222222222222
22222222222222221d1d711dd711d1d1222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
222222222222222211dd11ddd11ddd11222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222111d11d6d11dd111222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222221dddd1ddddd122222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222211ddd11ddd1122222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222111dddd111111222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
222222222222222222221d11111d1171222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222111ddd111161222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222111dd1dd11d1222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222216d116dd1dd1222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222111111111111222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222262222266222222666222226662666266626622266266626662666266626622666222222222
2222222222222222222222222222222226ddd62222d6ddd222222622222226222222226222222622626262626262622262626262626262226262262222222222
222222222222222222222222222222222d222d6226d222d222226222222226222222226222222622662266626262666266626662662266226262262222222222
222222222222222222222222222222222d22ddd66ddd22d222222622222226222622226222222622626262626262226262226262626262226262262222222222
222222222222222222222222222222222d22dddddddd22d222222262222266626222226222222622626262626262662262226262626266626262262222222222
222222222222222222222222222222222d2d222dd222d2d222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222dd22ddd22ddd2222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222d22d6d22dd22222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222dddd2ddddd22222222222222222222222222222222222222222222222222222222222222222222222222222222222
222222222222222222222222222222222222ddd22ddd222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222dddd22222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222d22222d222222222222222222222222222222222222222222222222222222222222222222222222222222222222
222222222222222222222222222222222222222ddd22226222222222222222222222222222222222222222222222222222222222222222222222222222222222
222222222222222222222222222222222222222dd2dd22d222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222226d226dd2dd222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222211111112211111112222622222622222226662222266226662222222222222222222222222222222
22222222222222222222222222222222222222222222222212222211112222212226222222622222222262222226222262222222222222222222222222222222
22222222222222222222222222222222222222222222222212111221122111212262222222666222222262222226222662222222222222222222222222222222
22222222222222222222222222222222222222222222222212112222222211212226222222626226222262262226222262222222222222222222222222222222
22222222222222222222222222222222222222222222222212112222222211212222622222666262222262622266626662222222222222222222222222222222
22222222222222222222222222222222222222222222222212122112221121212222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222211221122211222112222222222222266626662666266222662666266626662666266226662222222
22222222222222222222222222222222222222222222222211121122211221112222222222222226226262626262626222626262626262622262622622222222
22222222222222222222222222222222222222222222222222122221222221222222222222222226226622666262626662666266626622662262622622222222
22222222222222222222222222222222222222222222222222112221122211222222222222222226226262626262622262622262626262622262622622222222
22222222222222222222222222222222222222222222222222211122221111112222222222222226226262626262626622622262626262666262622622222222
22222222222222222222222222222222222222222222222222221211111211212222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222221112221111212222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222221112212211212222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222221221122212212222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222221111111111112222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
222222222222222222222222222222222222222222222222222222222222222222ddd22222d2ddd2222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222d222d2222d222d2222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222d22ddd22ddd22d2222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222d22dddddddd22d2222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222d2d222dd222d2d2222222222222222222222222222222222222222222222222
222222222222222222222222222222222222222222222222222222222222222222dd22ddd22ddd22222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222d22d2d22dd222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222dddd2ddddd222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222ddd22ddd2222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222dddd222222222222222222222222222222222222222222222222222222
222222222222222222222222222222222222222222222222222222222222222222222d22222d2222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222ddd222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222dd2dd22d2222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222d222dd2dd2222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222226222222666262226662266262626662666266626622266226222222
22222222222222222222222222222222222222222222222222222222222222222222222262622222622262222622622262626222626226226262622226222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222662262222622622266226622662226226262622226222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222622262222622622262626222626226226262626222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222622266626662266262626662626266626262666226222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222

