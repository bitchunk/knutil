pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--mkpal
--v0.1
--@shiftalow / bitchunk

--[[
- mkpal             -- create a color swap table for use in pal().
- @param  any p     -- a "table, or hexadecimal string" containing the color id to be swapped.
- @param  any s     -- a "table, or hexadecimal string" containing the color id to be displayed after swapping.
- @return table,... -- returns the palette swap table possible with pal(). returns a tuple if there are multiple arguments.

- @description
 - it is not an error if the number of elements in the swap table does not match.
]]--

function mkpal(p,s,...)
 local t={}
 if s then
  for i,p in pairs(split(p,1) or p) do
  t[tonum(p,1)]=tonum(s[i],1)
  end
  return t,mkpal(p,...)
 end
end


----

--table of palette swaps 'p'
local p={mkpal({1,13,6,7},{13,7,6,1},{2,9,15,4})}

--golden palette 'g'
local g=mkpal('123456789abcdef','2244aaff24af24a')

while 1 do
	cls()
	?'--------------'
	?'--mkpal test--'
	?'--------------'
	
	-- the base pallete.
	-- 1 13 6 7
	pal()
	spr(1,16,32,2,2)
	
	-- the first swap pallete.
	-- 13 7 6 1
	pal(p[1])
	spr(1,32,48,2,2)

	-- the second swap pallete.
	-- 2 4 9 15
	pal(p[2])
	spr(1,48,64,2,2)

	-- the pallete "g" is rotation table of full pallete.
	pal(g)
	spr(1,64,80,2,2)
	
	add(g,deli(g,1))
	flip()
end


-->8
--[[
update history
**v0.1**
- first release
]]--

-->8
--other version code
--[[

--** library-dependent **--
function mkpal(p,s,...)
	if s then
		return comb(htd(p,1) or p,htd(s,1) or s),mkpal(p,...)
	end
end

]]--
__gfx__
00000000111111100111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000016ddd61111d6ddd100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007001d111d6116d111d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770001d11ddd66ddd11d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770001d11dddddddd11d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007001d1d711dd711d1d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000011dd11ddd11ddd1100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111d11d6d11dd11100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001dddd1ddddd10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000011ddd11ddd110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000111dddd11111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000001d11111d117100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000111ddd11116100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000111dd1dd11d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000016d116dd1dd100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000011111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22202220222022202220222022202220222022202220222022202220000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000222020202220222020000000222022200220222000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000222020202020202020000000020020002000020000000000000000000000000000000000000000000000000000000000000000000000000000000000
22202220202022002220222020000000020022002220020022202220000000000000000000000000000000000000000000000000000000000000000000000000
00000000202020202000202020000000020020000020020000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000202020202000202022200000020022202200020000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22202220222022202220222022202220222022202220222022202220000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001111111001111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000016ddd61111d6ddd1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001d111d6116d111d1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001d11ddd66ddd11d1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001d11dddddddd11d1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001d1d711dd711d1d1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000011dd11ddd11ddd11000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000111d11d6d11dd111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000001dddd1ddddd100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000011ddd11ddd1100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000111dddd111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000001d11111d1171000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000111ddd111161000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000111dd1dd11d1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000016d116dd1dd1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000ddddddd00ddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d67776dddd76777d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d7ddd76dd67ddd7d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d7dd77766777dd7d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d7dd77777777dd7d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d7d71dd771dd7d7d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000dd77dd777dd777dd00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000ddd7dd767dd77ddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000d7777d77777d0000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000dd777dd777dd0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000ddd7777dddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000d7ddddd7dd1d00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000ddd777dddd6d00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000ddd77d77dd7d00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000d67dd677d77d00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000dddddddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000022222220022222220000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000002f999f22229f99920000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000292229f22f9222920000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000002922999ff99922920000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000029229999999922920000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000029294229942292920000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000022992299922999220000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000002229229f922992220000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000299992999992000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000229992299922000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000022299992222220000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000002922222922420000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000002229992222f20000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000002229929922920000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000002f922f9929920000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000002222222222220000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000aaaaaaa00aaaaaaa000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000a42224aaaa24222a000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000a2aaa24aa42aaa2a000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000a2aa22244222aa2a000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000a2aa22222222aa2a000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000a2a2aaa22aaa2a2a000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000aa22aa222aa222aa000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000aaa2aa242aa22aaa000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000a2222a22222a00000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000aa222aa222aa00000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000aaa2222aaaaaa000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000a2aaaaa2aaaa000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000aaa222aaaa4a000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000aaa22a22aa2a000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000a42aa422a22a000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000aaaaaaaaaaaa000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

