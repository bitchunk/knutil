pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
--htbl [convert from string to hash table]
--v0.3
--@shiftalow / bitchunk

function htbl(ht,c)
local t,k,rt={}
ht,c=split(ht,'') or ht,c or 1
while ht[c] do
local p=ht[c]
c+=1
if p=='{' or p=='=' then
rt,c=htbl(ht,c)
if p=='=' then
t[k],k=rt[1]
elseif k then
t[k],k=rt
else
add(t,rt)
end
elseif p=='}' or p==';' then
add(t,tonorm(k))
return t,c
elseif p==' ' then
add(t,tonorm(k))
k=nil
elseif p~="\n" then
k=(k or '')..p
end
end
add(t,tonorm(k))
return t
end

function tonorm(s)
if s=='true' then return true
elseif s=='false' then return false
elseif s=='nil' then return nil
end
return tonum(s) or s
end

cls()
for i,v in pairs(htbl('i â™¥ ðŸ±')) do
print(i..': '..v)
end

for j,t in pairs(htbl('â¬†ï¸{up 20}â¬‡ï¸{down 20}')) do
for i,v in pairs(t) do
print(j..'['..i..': '..v..']')
end
end

for j,t in pairs(htbl[[
x=40;
y=80;
t=dog;
i{collar bone frisbee{1 2 3}}
]]
) do
for i,v in pairs(type(t)=='table' and t or {t}) do
 local s
	if type(v)=='table' then
	 s='{'
		for i,w in pairs(v) do
			s=s..' '..w
		end
		s=s..' }'
	end
	print(j..'['..i..': '..(s or v)..']')
	end
end


-->8
--[[
update history
v0.3
	code update saved:
	 htbl 7 tokens
	 tonorm 9 tokens
v0.2
	run newlines without replace()
v0.1
	first version
]]--
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
66000000000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06000600000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06000600000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000000006606600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600600000006666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000000006666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60000600000000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000000060000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600600000066666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06600000000060666060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600600000060666060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000000006666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066000000000060606660066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660600006000600000060606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600006000000000060606660006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600006000600000060606000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066600000000006606000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066600000000066606660066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660600000600600000000606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600066600000000066606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600060000600000060006060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066600000000066606660066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066000000000066000660606066000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600006000600000060606060606060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600006000000000060606060606060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660600006000600000060606060666060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066600000000066606600666060600660000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066600000000066606660066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600000600600000000606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000660600066600000000066606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660600060000600000060006060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600660066600000000066606660066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606600660000000000066006606000600066606660066000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000060006000000600060606000600060606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000060000000000600060606000600066606600006000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000060006000000600060606000600060606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606600666000000000066066006660666060606060066000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606600666000000000666006606600666006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000006006000000606060606060600000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000666000000000660060606060660000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000600006000000606060606060600000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606600666000000000666066006060666006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606600666066606660066066606660666000000000066000006600000066600000666000006600066000000000000000000000000000000000000000000000
06006000600060600600600060606000600006000000060000000600000000600000006000000600006000000000000000000000000000000000000000000000
06006000660066000600666066006600660000000000660000000600000066600000066000000660006000000000000000000000000000000000000000000000
06006000600060600600006060606000600006000000060000000600000060000000006000000600006000000000000000000000000000000000000000000000
66606600600060606660660066606660666000000000066000006660000066600000666000006600066000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60606600660000000000666066600660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60606000060006000000606060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606000060000000000666060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00606000060006000000606060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606600666000000000666066600660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606600660000000000660006600660066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000060006000000606060606000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000060000000000606060606000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000060006000000606060606060006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006600666000000000666066006660066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60606600660000000000606066600660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60606000060006000000606060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06006000060000000000666060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60606000060006000000006060600060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60606600666000000000006066600660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

